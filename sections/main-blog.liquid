

<script
  src="{{ 'blog-posts-list.js' | asset_url }}"
  type="module"
  fetchpriority="low"
></script>

<blog-posts-list section-id="{{ section.id }}">
  <div class="section-background color-{{ section.settings.color_scheme }}"></div>
  <div
    class="
      section
      color-{{ section.settings.color_scheme }}
      blog-posts
      spacing-style
      size-style
    "
    style="{% render 'spacing-style', settings: section.settings %}"
  >
    {% content_for 'blocks' %}

    {%- paginate blog.articles by 12 -%}
      <span ref="viewMorePrevious"></span>
      <div
        ref="grid"
        class="blog-posts-container"
        data-last-page="{{ paginate.pages }}"
      >
        {% for article in blog.articles %}
          <div
            class="blog-post-item"
            ref="cards[]"
            data-page="{{ paginate.current_page }}"
          >
            {% content_for 'block', id: 'static-blog-post-card', type: '_blog-post-card', article: article %}
          </div>
        {% endfor %}
      </div>
      <span ref="viewMoreNext"></span>
    {%- endpaginate -%}
  </div>
</blog-posts-list>

{% comment %}
Blog listing typography overrides (Horizon).
This only affects the blog cards on the /blogs/<handle> pages.
It respects our custom fonts from assets/custom.css.liquid
{% endcomment %}
{%- assign bbf = section.settings.blog_list_body_font -%}
{%- assign bhf = section.settings.blog_list_heading_font -%}
{%- if section.settings.blog_list_override_typography -%}
  <style>
    /* Scope to this section instance only */
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts{
      --blog-list-body-font: {% case bbf %}
        {% when 'georgia' %}'Georgia','Times New Roman',Times,serif
        {% when 'baloo' %}'Baloo Da 2','Arial',sans-serif
        {% else %}'Arial', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, sans-serif
      {% endcase %}, 'Akkhor','Noto Sans Bengali','Baloo Da 2',sans-serif;

      --blog-list-heading-font: {% case bhf %}
        {% when 'baloo' %}'Baloo Da 2','Arial',sans-serif
        {% when 'arial' %}'Arial', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, sans-serif
        {% else %}'Georgia','Times New Roman',Times,serif
      {% endcase %}, 'Akkhor','Noto Sans Bengali','Baloo Da 2',sans-serif;

      --blog-list-body-size: {{ section.settings.blog_list_body_size }}px;
      --blog-list-heading-weight: {{ section.settings.blog_list_heading_weight }};
      --blog-list-heading-lineheight: {{ section.settings.blog_list_heading_lineheight }};
      /* letter-spacing stored as integer; convert to em */
      --blog-list-body-letterspace: {{ section.settings.blog_list_body_letterspace | divided_by: 100.0 }}em;
    }

    /* Apply to card pieces (use multiple selectors to be theme-safe) */
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts .blog-post-item,
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts .blog-post-card__content,
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts .blog-post-card__excerpt{
      font-family: var(--blog-list-body-font);
      font-size: var(--blog-list-body-size);
      letter-spacing: var(--blog-list-body-letterspace);
    }

    blog-posts-list[section-id="{{ section.id }}"] .blog-posts .blog-post-card__title,
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts [class*="blog-post-card"] h1,
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts [class*="blog-post-card"] h2,
    blog-posts-list[section-id="{{ section.id }}"] .blog-posts [class*="blog-post-card"] h3{
      font-family: var(--blog-list-heading-font);
      font-weight: var(--blog-list-heading-weight);
      line-height: var(--blog-list-heading-lineheight);
    }
  </style>
{%- endif -%}


{% stylesheet %}
  /**
   * Blog posts page layout
   */
  .blog-posts {
    --page-content-width: var(--narrow-page-width);
    --page-width: calc(var(--page-content-width) + (var(--page-margin) * 2));
    --columns-gap: 36px;
    --rows-gap: 36px;
  }

  .blog-posts-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 1rem;
    width: 100%;
    column-gap: var(--columns-gap);
    row-gap: var(--rows-gap);
  }

  /**
   * Apart from the first and second rows in the grid, all remaining blog posts
   * are arranged in a three-column layout:
   * +------------+------------+-------------+
   * |            |            |             |
   * |  (span 2)  |  (span 2)  |  (span 2)   |
   * |            |            |             |
   * +------------+------------+-------------+
   */
  .blog-post-item {
    --blog-post-card-scale: 0.6;

    grid-column: span 2;

    @media screen and (max-width: 749px) {
      --blog-post-card-scale: 0.5;

      grid-column: span 6;
    }
  }

  /**
   * The second row of blog posts has two columns:
   * +-------------------+-------------------+
   * |                   |                   |
   * |  (column span 3)  |  (column span 3)  |
   * |                   |                   |
   * +-------------------+-------------------+
   */
  .blog-post-item:nth-child(2),
  .blog-post-item:nth-child(3) {
    --blog-post-card-scale: 0.8;

    grid-column: span 3;

    @media screen and (max-width: 749px) {
      --blog-post-card-scale: 0.5;

      grid-column: span 6;
    }
  }

  /**
   * The first row of blog posts has only one column:
   * +---------------------------------------+
   * |                                       |
   * |           (1 column span 6)           |
   * |                                       |
   * +---------------------------------------+
   */
  .blog-post-item:first-child {
    --blog-post-card-scale: 1;

    grid-column: span 6;
  }

  /**
   * When there's no image, the blog post item has a border.
   */
  .blog-post-item {
    border: 1px solid rgb(var(--color-foreground-rgb) / var(--opacity-20));
    padding: 0 1rem 1rem;
  }

  .blog-post-item:has(.blog-post-card__image-container) {
    border: none;
    padding: 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:names.blog_posts",
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "text"
    },
    {
      "type": "icon"
    },
    {
      "type": "image"
    },
    {
      "type": "button"
    },
    {
      "type": "video"
    },
    {
      "type": "group"
    },
    {
      "type": "spacer"
    },
    {
      "type": "_divider"
    }
  ],
  "disabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
{ "type": "header", "content": "Blog list typography" },
{
  "type": "checkbox",
  "id": "blog_list_override_typography",
  "label": "Override global typography on blog listing",
  "default": true
},
{
  "type": "select",
  "id": "blog_list_body_font",
  "label": "Card body font",
  "options": [
    { "value": "arial", "label": "Arial" },
    { "value": "georgia", "label": "Georgia" },
    { "value": "baloo", "label": "Baloo Da 2" }
  ],
  "default": "arial"
},
{
  "type": "select",
  "id": "blog_list_heading_font",
  "label": "Card heading font",
  "options": [
    { "value": "georgia", "label": "Georgia" },
    { "value": "baloo", "label": "Baloo Da 2" },
    { "value": "arial", "label": "Arial" }
  ],
  "default": "georgia"
},
{ "type": "range",
  "id": "blog_list_body_size",
  "min": 14, "max": 20, "step": 1, "unit": "px",
  "label": "Card body size",
  "default": 16
},
{ "type": "range",
  "id": "blog_list_heading_weight",
  "min": 400, "max": 900, "step": 100,
  "label": "Card heading weight",
  "default": 700
},
{ "type": "range",
  "id": "blog_list_heading_lineheight",
  "min": 1.1, "max": 1.5, "step": 0.1,
  "label": "Card heading line-height",
  "default": 1.3
},
/* IMPORTANT: Use integers here to avoid Shopify decimal limit;
   we'll divide by 100 in CSS above */
{ "type": "range",
  "id": "blog_list_body_letterspace",
  "min": -10, "max": 10, "step": 1,
  "label": "Card body letter-spacing (Ã—0.01em)",
  "default": 0
}
  ]
}
{% endschema %}
