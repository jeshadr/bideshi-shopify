{% comment %}
  WebSensePro - Custom Fonts (multi-font, scoped)
  Usage:
    1) Add this file as: sections/websensepro-custom-font.liquid
    2) Include in theme.liquid inside <body>:
         {% section 'websensepro-custom-font' %}
    3) In the editor: Add one block per font (name, URL, weight/style, check elements).
    4) Wrap areas to scope a font:
         <div class="ws-font-{{ block-name | handle }}"> ... </div>
       Examples:
         .ws-font-merriweather, .ws-font-baloo-da-2, .ws-font-fn-akkhor
    5) Or target specific selectors via the “CSS Selectors” field in each block.
{% endcomment %}

{% if section.settings.enable %}
<style data-custom-fonts>
  {% assign items = section.blocks %}

  {% for block in items %}
    {% assign name = block.settings.name | strip %}
    {% assign url = block.settings.custom_font_url | strip %}
    {% assign font_weight = block.settings.custom_font_weight | strip %}
    {% assign font_style = block.settings.custom_font_style | default: 'normal' | strip %}

    {% assign apply_h1 = block.settings.apply_h1 %}
    {% assign apply_h2 = block.settings.apply_h2 %}
    {% assign apply_h3 = block.settings.apply_h3 %}
    {% assign apply_h4 = block.settings.apply_h4 %}
    {% assign apply_h5 = block.settings.apply_h5 %}
    {% assign apply_h6 = block.settings.apply_h6 %}
    {% assign apply_span = block.settings.apply_span %}
    {% assign apply_p = block.settings.apply_p %}
    {% assign apply_a = block.settings.apply_a %}
    {% assign apply_input = block.settings.apply_input %}
    {% assign apply_label = block.settings.apply_label %}
    {% assign apply_legend = block.settings.apply_legend %}
    {% assign apply_button = block.settings.apply_button %}
    {% assign apply_summary = block.settings.apply_summary %}
    {% assign apply_select = block.settings.apply_select %}
    {% assign apply_option = block.settings.apply_option %}
    {% assign apply_small = block.settings.apply_small %}
    {% assign apply_custom = block.settings.apply_custom %}

    {% if url != blank and name != blank %}

      {% capture _font_type %}
        {% if url contains '.woff2' %}woff2
        {% elsif url contains '.woff' %}woff
        {% elsif url contains '.otf' %}opentype
        {% elsif url contains '.ttf' %}truetype
        {% elsif url contains '.svg' %}svg
        {% else %}woff
        {% endif %}
      {% endcapture %}
      {% assign font_type = _font_type | strip %}

      /* --- Load the font face for: {{ name }} --- */
      @font-face {
        font-family: '{{ name }}';
        src: url('{{ url }}') format('{{ font_type }}');
        {% if font_style != 'none' %}font-style: {{ font_style }};{% endif %}
        {% if font_weight != 'none' %}font-weight: {{ font_weight }};{% endif %}
        font-display: swap;
      }

      /* Utility scope class so multiple fonts don't overwrite each other */
      .ws-font-{{ name | handle }} {}

      {% if apply_h1 %}
      .ws-font-{{ name | handle }} h1 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_h2 %}
      .ws-font-{{ name | handle }} h2 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_h3 %}
      .ws-font-{{ name | handle }} h3 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_h4 %}
      .ws-font-{{ name | handle }} h4 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_h5 %}
      .ws-font-{{ name | handle }} h5 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_h6 %}
      .ws-font-{{ name | handle }} h6 { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}

      {% if apply_p %}
      .ws-font-{{ name | handle }} p { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_span %}
      .ws-font-{{ name | handle }} span { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_a %}
      .ws-font-{{ name | handle }} a { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_input %}
      .ws-font-{{ name | handle }} input { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_label %}
      .ws-font-{{ name | handle }} label { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_legend %}
      .ws-font-{{ name | handle }} legend { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_button %}
      .ws-font-{{ name | handle }} button { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_summary %}
      .ws-font-{{ name | handle }} summary { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_select %}
      .ws-font-{{ name | handle }} select { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_option %}
      .ws-font-{{ name | handle }} option { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}
      {% if apply_small %}
      .ws-font-{{ name | handle }} small { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}

      {% if apply_custom != blank %}
      /* Global/direct targeting for this font block */
      {{ apply_custom }} { font-family: '{{ name }}' !important; {% if font_weight != 'none' %}font-weight: {{ font_weight }} !important;{% endif %} }
      {% endif %}

    {% endif %}
  {% endfor %}
</style>
{% endif %}

{% schema %}
{
  "name": "Custom Font",
  "settings": [
    {
      "type": "header",
      "content": "Subscribe to WebSensePro for Free Tutorials"
    },
    {
      "type": "checkbox",
      "id": "enable",
      "label": "Enable",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "font",
      "name": "Font",
      "settings": [
        {
          "type": "header",
          "content": "Add one block per font (name, URL, weight/style)."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Font name (family)",
          "default": "Custom Font"
        },
        {
          "type": "text",
          "id": "custom_font_url",
          "label": "Font file URL (.woff2 preferred)",
          "info": "Paste a direct URL to a font file: .woff2 / .woff / .ttf / .otf"
        },
        {
          "type": "select",
          "id": "custom_font_weight",
          "label": "Font weight",
          "default": "normal",
          "options": [
            { "value": "none", "label": "None (don't set)" },
            { "value": "100", "label": "100" },
            { "value": "200", "label": "200" },
            { "value": "300", "label": "300" },
            { "value": "400", "label": "400 (Normal)" },
            { "value": "500", "label": "500" },
            { "value": "600", "label": "600" },
            { "value": "700", "label": "700 (Bold)" },
            { "value": "800", "label": "800" },
            { "value": "900", "label": "900" },
            { "value": "normal", "label": "Normal keyword" },
            { "value": "bold", "label": "Bold keyword" }
          ]
        },
        {
          "type": "select",
          "id": "custom_font_style",
          "label": "Font style",
          "default": "normal",
          "options": [
            { "value": "normal", "label": "Normal" },
            { "value": "italic", "label": "Italic" },
            { "value": "none", "label": "None (don't set)" }
          ]
        },
        {
          "type": "paragraph",
          "content": "Apply this font to elements INSIDE a wrapper: .ws-font-{{ name | handle }} ..."
        },
        { "type": "checkbox", "id": "apply_h1", "label": "H1", "default": true },
        { "type": "checkbox", "id": "apply_h2", "label": "H2", "default": true },
        { "type": "checkbox", "id": "apply_h3", "label": "H3", "default": true },
        { "type": "checkbox", "id": "apply_h4", "label": "H4", "default": true },
        { "type": "checkbox", "id": "apply_h5", "label": "H5", "default": true },
        { "type": "checkbox", "id": "apply_h6", "label": "H6", "default": true },
        { "type": "checkbox", "id": "apply_p", "label": "<p> tags", "default": true },
        { "type": "checkbox", "id": "apply_span", "label": "<span> tags", "default": true },
        { "type": "checkbox", "id": "apply_a", "label": "<a> tags", "default": false },
        { "type": "checkbox", "id": "apply_input", "label": "<input> tags", "default": false },
        { "type": "checkbox", "id": "apply_label", "label": "<label> tags", "default": false },
        { "type": "checkbox", "id": "apply_legend", "label": "<legend> tags", "default": false },
        { "type": "checkbox", "id": "apply_button", "label": "<button> tags", "default": false },
        { "type": "checkbox", "id": "apply_summary", "label": "<summary> tags", "default": false },
        { "type": "checkbox", "id": "apply_select", "label": "<select> tags", "default": false },
        { "type": "checkbox", "id": "apply_option", "label": "<option> tags", "default": false },
        { "type": "checkbox", "id": "apply_small", "label": "<small> tags", "default": false },
        {
          "type": "textarea",
          "id": "apply_custom",
          "label": "CSS Selectors (global targeting)",
          "info": "Comma-separated selectors to apply this font globally, e.g. .product-title, .card__heading"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Font"
    }
  ]
}
{% endschema %}
